<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>C.O.N.E.C.T.A – Formularios</title>

<style>
  /* ======= Paleta y tokens base ======= */
  :root{
    --bg-base:#ffffff;
    --bg-a:#fdda64;
    --bg-b:#cad2e9;
    --text:#3f2b56;
    --card:#ffffffee;
    --line:#e3e6ef;
    --btn:#fdda64;
    --btn-text:#3f2b56;
    --btn-hover:#cad2e9;
    --radius:14px;
    --viewerhead:44px; /* alto aprox. del encabezado del visor */
  }

  /* ======= Fondo y tipografía ======= */
  body{
    margin:0; color:var(--text);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto;
    background: var(--bg-base);
    background-image: linear-gradient(180deg, var(--bg-a) 0%, var(--bg-b) 100%);
    background-attachment: fixed;
  }

  /* ======= Contenedor ======= */
  .wrap{ max-width:1200px; margin:24px auto; padding:0 16px; }

  /* ======= Header ======= */
  .header{
    display:flex; align-items:center; justify-content:space-between; gap:16px;
    background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
    padding:12px 16px;
  }
  .brand{display:flex; align-items:center; gap:12px}
  .brand img{ width:64px; height:64px; object-fit:contain; border-radius:8px }

  /* ======= Título (acrónimo y expansión) ======= */
  .title{ display:flex; flex-direction:column; line-height:1.12 }
  .acronym{
    font-weight:800; font-size:22px; letter-spacing:.08em;
    display:flex; align-items:center; gap:.25em; text-transform:uppercase;
  }
  .acronym .l{ display:inline-block }
  .acronym .dot{ opacity:.55 }
  
  /* Colores de las letras (C O N E C T A) */
  .acronym span:nth-child(1){ color:#fdda64; } /* C */
  .acronym span:nth-child(3){ color:#a2ddd2; } /* O */
  .acronym span:nth-child(5){ color:#cad2e9; } /* N */
  .acronym span:nth-child(7){ color:#ff8e6f; } /* E */
  .acronym span:nth-child(9){ color:#3f2b56; } /* C */
  .acronym span:nth-child(11){ color:#fdda64; } /* T */
  .acronym span:nth-child(13){ color:#a2ddd2; } /* A */

  .expansion{
    font-size:12px; opacity:.95; margin-top:2px;
    text-transform:none; letter-spacing:.02em;
  }

  .top-buttons{ display:flex; gap:8px }
  .open{
    background:var(--btn); color:var(--btn-text); border:none; border-radius:10px;
    padding:8px 12px; cursor:pointer;
  }
  .open:hover{ background:var(--btn-hover) }
  .open.active{ outline:2px solid color-mix(in srgb, var(--btn) 45%, transparent) }

  /* ======= Layout general ======= */
  .layout{ display:flex; gap:16px; margin-top:16px; }
  .side{
    width:260px; min-width:220px; background:var(--card); border:1px solid var(--line);
    border-radius:var(--radius); padding:12px; height:calc(100vh - 180px); overflow:auto;
  }
  .main{
    flex:1; min-width:0; background:var(--card); border:1px solid var(--line);
    border-radius:var(--radius); display:flex; flex-direction:column;
  }

  /* ======= Secciones del menú ======= */
  .group{ margin-bottom:16px; }
  .group h3{
    margin:8px 8px 6px; font-size:14px; letter-spacing:.2px; opacity:.9;
    border-left:4px solid var(--btn); padding-left:8px;
  }
  .list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px }
  .item-btn{
    width:100%; text-align:left; border:1px solid var(--line); background:white;
    border-radius:12px; padding:10px 12px; cursor:pointer; color:var(--text);
  }
  .item-btn:hover{ border-color:#d1d6ea; background:#fafbff }
  .item-btn.active{ outline:2px solid color-mix(in srgb, var(--btn) 50%, transparent) }

  /* ======= Viewer ======= */
  .viewer-head{
    display:flex; align-items:center; justify-content:space-between; gap:8px;
    padding:10px 12px; border-bottom:1px solid var(--line);
  }
  .viewer-title{ margin:0; font-size:15px; }
  iframe{
    flex:1; width:100%; border:0;
    border-bottom-left-radius:var(--radius); border-bottom-right-radius:var(--radius);
    min-height:70vh;
  }

  /* ======= Footer ======= */
  .footer{ text-align:center; margin-top:16px; color:#5b4a6e; }
  .footer a{ color:inherit; text-decoration:underline }

  /* --- Móvil: reacomoda header y layout (vertical por defecto) --- */
  @media (max-width:700px){
    .header{
      flex-direction: column;
      align-items: stretch;
      gap: 8px;
    }

    .brand{
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 10px;
      flex-wrap: nowrap;
      text-align: left;
    }

    .top-buttons{
      order: 2;
      width: 100%;
      display: flex;
      gap: 8px;
    }
    .top-buttons .open{
      flex: 1 1 auto;
      width: auto;
    }

    .acronym{ font-size:18px }
    .expansion{ font-size:11px }

    .layout{ flex-direction: column; }

    /* Sidebar en móvil: ancho completo */
    .side{
      width:100%;
      box-sizing:border-box;
      height:auto;
      min-height:auto;
      overflow:auto;
    }
  }

  /* ===== Escritorio: igualar alturas de sidebar y visor ===== */
  @media (min-width:901px){
    .side{
      height:auto;        /* anula el fijo */
      min-height:78vh;    /* mismo piso que el visor */
      overflow:auto;
    }
    .main iframe{
      min-height:78vh;    /* igual piso que el sidebar */
    }
  }

  /* ===== Móvil horizontal: dos columnas e igual altura ===== */
  @media (max-width:900px) and (min-aspect-ratio:1/1){
    .layout{
      display:flex;
      flex-direction:row;      /* lado a lado */
      align-items:stretch;     /* misma altura real */
      gap:16px;
    }

  /* Sidebar: NO heredar anchos de escritorio y limitar a 38% */
    .side{
      width:auto;              /* ← anula width:260px */
      min-width:0;             /* ← anula min-width:220px */
      flex:0 0 38%;            /* ← ocupa ~38% */
      max-width:38%;
      box-sizing:border-box;
      height:auto;
      min-height:auto;
      overflow:auto;
    }

  /* Visor: toma el resto (~62%) */
    .main{
      min-width:0;
      flex:1 1 62%;
      max-width:62%;
      height:auto;
      min-height:auto;
    }

  /* Base de alto para el iframe del visor */
    .main iframe{
      min-height:70svh;
    }
  }
  
</style>
</head>

<body>
  <div class="wrap">
    <!-- ======= Encabezado ======= -->
    <header class="header">
      <div class="brand">
        <img src="./DiversoLab_Logo.gif" alt="DiversoLAB logo" decoding="async">

        <div class="title">
          <div class="acronym">
            <span class="l">C</span><span class="dot">·</span>
            <span class="l">O</span><span class="dot">·</span>
            <span class="l">N</span><span class="dot">·</span>
            <span class="l">E</span><span class="dot">·</span>
            <span class="l">C</span><span class="dot">·</span>
            <span class="l">T</span><span class="dot">·</span>
            <span class="l">A</span>
          </div>
          <div class="expansion">
            centro de observación, evaluación y coordinación para la transformación accesible
          </div>
        </div>
      </div>

      <div class="top-buttons">
        <button class="open active" id="btnForms">Formularios</button>
        <button class="open" id="btnDash">Visualizaciones</button>
      </div>
    </header>

    <!-- ======= Contenido ======= -->
    <div class="layout" id="layoutForms">
      <!-- Sidebar -->
      <aside class="side">
        <div class="group">
          <h3>Registros</h3>
          <ul class="list" id="registros">
            <li><button class="item-btn" data-title="Registro" data-url="https://docs.google.com/forms/d/e/1FAIpQLScghuGM34r0ugfefoma48AS3nqsSkVjqFMHqlyaJw91f0Q6AA/viewform?usp=header">Registro</button></li>
            <li><button class="item-btn" data-title="Consentimiento Uso Datos" data-url="https://drive.google.com/file/d/18exjFFYQGUNF6L_-oBcT_KMs27if8KOc/preview">Consentimiento Uso Datos</button></li>
          </ul>
        </div>

        <div class="group">
          <h3>Formularios</h3>
          <ul class="list" id="formularios">
            <li><button class="item-btn" data-title="QoL INICO-FEAPS: Autoinforme" data-url="https://forms.gle/VRYiHPMSsMoeqZpP8">QoL INICO-FEAPS: Autoinforme</button></li>
            <li><button class="item-btn" data-title="QoL INICO-FEAPS: Otros" data-url="https://forms.gle/ZD6F1zojPba94ULb8">QoL INICO-FEAPS: Otros</button></li>
            <li><button class="item-btn" data-title="Evaluación Experiencias" data-url="https://forms.gle/L8NzoLEPpP5aBD2H9">Evaluación Experiencias</button></li>
            <li><button class="item-btn" data-title="Evaluación Cursos" data-url="https://forms.gle/ijRj9tp14igRGudJ6">Evaluación Cursos</button></li>
            <li><button class="item-btn" data-title="Evaluación Proveedores" data-url="https://forms.gle/dxyXBpaUzADHeBBj9">Evaluación Proveedores</button></li>
          </ul>
        </div>

        <div class="group">
          <h3>Checklist</h3>
          <ul class="list" id="checklist">
            <li><button class="item-btn" data-title="Accesibilidad" data-url="https://forms.gle/Jfck2BaGfed5UfjP8">Accesibilidad</button></li>
            <li><button class="item-btn" data-title="Ambiental" data-url="https://forms.gle/U4LB34yeGyubmpxg8">Ambiental</button></li>
          </ul>
        </div>
      </aside>

      <!-- Visor -->
      <section class="main">
        <div class="viewer-head">
          <h2 class="viewer-title" id="viewerTitle">Selecciona un elemento del menú</h2>
          <button class="open" id="openNew" disabled>Abrir en pestaña nueva ↗</button>
        </div>
        <iframe id="viewer" title="Visor" loading="lazy" referrerpolicy="no-referrer"></iframe>
      </section>
    </div>

    <p class="footer">© <span id="y"></span> DiversoLAB</p>
  </div>

<script>
  // Año actual
  document.getElementById('y').textContent = new Date().getFullYear();

  // Navegación entre páginas
  document.getElementById('btnForms').onclick = () => {
    window.location.href = 'formularios.html';
  };
  document.getElementById('btnDash').onclick = () => {
    window.location.href = 'visualizaciones.html';
  };

  // Lógica del visor
  const viewer = document.getElementById('viewer');
  const viewerTitle = document.getElementById('viewerTitle');
  const openNew = document.getElementById('openNew');

  function select(btn){
    document.querySelectorAll('.item-btn.active').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const title = btn.dataset.title;
    const url = btn.dataset.url;

    viewerTitle.textContent = title;
    viewer.src = url || '';
    openNew.disabled = !url;
    openNew.onclick = () => window.open(url, '_blank');
    localStorage.setItem('intralink_last', JSON.stringify({title, url}));
  }

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('.item-btn');
    if(!btn) return;
    select(btn);
  });

  // Restaurar última selección
  const saved = localStorage.getItem('intralink_last');
  if(saved){
    try{
      const {title} = JSON.parse(saved);
      const match = Array.from(document.querySelectorAll('.item-btn'))
        .find(b => b.dataset.title === title);
      if(match) select(match);
    }catch{}
  }
</script>
</body>
</html>
